package cute.util.types;


import java.awt.Color;
import java.util.ArrayList;

import net.minecraft.block.Block;
import net.minecraft.util.ResourceLocation;

public class VirtualBlock extends BlockInfo
{
	public static ArrayList<VirtualBlock> Blocks = new ArrayList<VirtualBlock>();
	
	public int r;
	public int g;
	public int b;
	public int a;
	
	public int meta;
	
	public boolean enabled;
	
	public VirtualBlock(ResourceLocation location)
	{
		super(location);
		
		this.meta = -1;
		this.enabled = false;
		this.r = 0;
		this.g = 0;
		this.b = 0;
		this.a = 255;
	}
	
	public VirtualBlock(ResourceLocation loc, boolean enabled, Color c, int meta)
	{
		super(loc);

		this.r = c.getRed();
		this.g = c.getGreen();
		this.b = c.getBlue();
		this.a = c.getAlpha();
		
		this.meta = meta;
		this.enabled = enabled;
	}
	
	public VirtualBlock(ResourceLocation loc, boolean enabled, int r, int g, int b, int a, int meta) 
	{
		super(loc);
		
		this.r = r;
		this.g = g;
		this.b = b;
		this.a = a;
		
		this.meta = meta;
		this.enabled = enabled;
	}
	
	public static VirtualBlock fromRegistryName(String name)
	{
		ResourceLocation rl = new ResourceLocation(name);
		
		if (!Block.blockRegistry.containsKey(rl)) 
			return null;
		
		return new VirtualBlock(rl);
	}

	public static VirtualBlock fromRegistryName(String name, boolean enabled, int r, int g, int b, int a, int meta)
	{
		ResourceLocation rl = new ResourceLocation(name);
		
		if (!Block.blockRegistry.containsKey(rl)) 
			return null;
		
		VirtualBlock vb = new VirtualBlock(rl);
		
		vb.enabled = enabled;
		vb.r = r;
		vb.g = g;
		vb.b = b;
		vb.meta = meta;
		
		return vb;
	}
	
	public static void setStandardList() 
	{
		Blocks.clear();
		
		
		insertBlock(new VirtualBlock(0, 0, 128, 200, -1, "minecraft:lapis_ore", true));
		insertBlock(new VirtualBlock(255, 0, 0, 200, -1, "minecraft:redstone_ore", true));
		insertBlock(new VirtualBlock(255, 255, 0, 200, -1, "minecraft:gold_ore", true));
		insertBlock(new VirtualBlock(0, 255, 0, 200, -1, "minecraft:emerald_ore", true));
		insertBlock(new VirtualBlock(0, 191, 255, 200, -1, "minecraft:diamond_ore", true));
		insertBlock(new VirtualBlock(0, 191, 128, 200, -1, "minecraft:coal_ore", true));
		insertBlock(new VirtualBlock(0, 200, 128, 200, -1, "minecraft:iron_ore", true));
		removeInvalidBlocks();
	}
	
	
	
	private static void insertBlock(VirtualBlock vb) 
	{
		for(int i = 0; i < VirtualBlock.Blocks.size(); i++) 
		{
			if(VirtualBlock.Blocks.get(i).blockInfo == vb.blockInfo) 
			{
				VirtualBlock.Blocks.set(i, vb);
				return;
			}
		}
		
		VirtualBlock.Blocks.add(vb);
	}
	
	public static boolean registerBlock(VirtualBlock vb) 
	{
		if (Block.blockRegistry.containsKey(vb.location)) 
		{
			insertBlock(vb);
			return true;
		}
		
		return false;
	}
	
	
	public static void removeInvalidBlocks() 
	{
		for (int i = 0; i < Blocks.size(); ++i) 
		{
			VirtualBlock block = Blocks.get(i);

			if (Block.blockRegistry.containsKey(block.location)) 
			{
				block.block = (Block)Block.blockRegistry.getObject(block.location);
				continue;
			}
			
			Blocks.remove(block);
		}
	}
	
	public static VirtualBlock FromString(String str) 
	{
		VirtualBlock result = new VirtualBlock();
		String[] info = str.split(" ");
		
		result.r = Integer.parseInt(info[0]);
		result.g = Integer.parseInt(info[1]);
		result.b = Integer.parseInt(info[2]);
		result.a = Integer.parseInt(info[3]);
		
		result.meta = Integer.parseInt(info[4]);
		result.id = info[5];
		
		result.enabled = Boolean.parseBoolean(info[6]);
		
		return result;
	}
	
	
	public String toString() 
	{
		return this.r + " " + 
			   this.g + " " + 
			   this.b + " " + 
			   this.a + " " + 
			   this.meta + " " + 
			   this.id + " " + 
			   this.enabled;
	}
}